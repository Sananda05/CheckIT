{% extends 'src\Views\Home\Homepage.html' %}
{% block HomeContent%}
{% load embed_video_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
  
  {% load static %}
  <link rel="stylesheet" href="css/bootstrap.css">
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
  <link href="{% static 'Static/assets/img/title-logo.png' %}" rel="icon">
  <link href="{% static 'Static/assets/img/apple-touch-icon.png' %}" rel="apple-touch-icon">

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <!--material icon--> 
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">
  </head>
<body>

  <div class="page-wrapper mdc-toolbar-fixed-adjust" style="background-color: white">
    <main class="content-wrapper">
    <div class="mdc-layout-grid__inner">
    <form action="" method="POST" enctype="multipart/form-data">
          {% csrf_token %}
          
          <button data-bs-toggle="modal"  style="border-radius:60%;width: 70px;
            height: 70px; position: absolute;
            right:30px;
            bottom: 100px;
            background-color:rgb(15, 180, 64);border-color:rgb(218, 218, 218); box-shadow:6px black" class="btn pmd-btn-fab pmd-ripple-effect btn-light pmd-btn-raised" data-bs-target="#newFolder"type="button"><i style="font-weight: bolder;color:aliceblue;" class="material-icons">add</i></button><br>

          <div class="modal" tabindex="-1" id="newFolder" style="margin-top: 10rem; height: 800px;">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" style="color: rgb(69, 10, 109);">Add New Material</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                  <div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-6-desktop">
                    <div class="mdc-text-field mdc-text-field--outlined">
                      <input class="mdc-text-field__input" name="university">
                      <div class="mdc-notched-outline">
                        <div class="mdc-notched-outline__leading"></div>
                        <div class="mdc-notched-outline__notch">
                          <label for="exam_name" class="mdc-floating-label">
                            University Name 
                          </label>    
                        </div>
                        <div class="mdc-notched-outline__trailing"></div>
                      </div>
                    </div>
                  </div>
              <br>

                  <textarea name = "description" placeholder="Description" style="height: 100px; width: 400px;"></textarea>
                  <br>
                    <div class="input-group">
                      <input type="file" multiple name ="exam_file" class="form-control" id="inputGroupFile04" aria-describedby="inputGroupFileAddon04" aria-label="Upload">
                    </div>
                    <input type="text" name="vid_file" placeholder="video Link" style="margin:1rem;"><br><span></span>
                </div>   
                <div class="modal-footer">
                      <input type="submit" value="Add" class="btn btn-primary">
                </div>
              </div>
           </div>
        </div>
     </form>
     
   
</div>
    
    
 
    {% if material %}
    {% for files in material %}
    <div class="container-xxl" style="margin-top: 1rem;">
     
      <div class="shadow-sm p-3 mb-5 bg-body rounded">
      
        <div class="card-header" style="border-radius: 10px; border-color: rgb(128, 128, 128);color:#76649b;"><div class="row">
          <div class="col-md-8">
            <a  href="/addComment/{{files.id}}/" style="text-decoration: none; color:rgb(69, 27, 146)">

             <h5> {{files.course_name}}</h5>
            </a>
          </div>
          <div class="col-md-4">
            <a href="deleteMaterial/{{files.id}}/" style="float: right; margin:5px; color:darkred">
              <i class="material-icons">
                delete
              </i>
            </a>
            <a href="{{files.pdf.url}}" download="{{files.pdf.url}}" style="float: right;margin:5px;color:rgb(19, 136, 72)">
          
              <i class="material-icons">
                file_download
              </i>
              
            </a>&nbsp &nbsp
            
   </div></div></div>

        <div class="card-body">
          <h6 style="font-weight: bold;">Topic : {{files.description}}</h6>
          <p style="font-weight: 500;">{{files.uni_name}}</p>

          <div class="mdc-layout-grid__cell stretch-card mdc-layout-grid__cell--span-3-desktop mdc-layout-grid__cell--span-4-tablet" style="width:300px;">
            <div class="mdc-card info-card info-card--success">
              <div class="card-inner">
               <a href="{{files.pdf.url}}" target="_blank" style="text-decoration: none;">
                <h6 style="color: rgb(11, 59, 161);">{{files.pdf}}</h6>      
               </a>
                <h5 class="font-weight-light pb-2 mb-1 border-bottom"> 
                </h5>
                <p class="tx-12 text-muted"></p>
               
                <div class="card-icon-wrapper">
                  <i class="material-icons">dvr</i>
                </div>
              </div>
            </div>
          </div><br>
          
          {% video files.video 'small' %}
      
        </div>
       
      <br>
      <div>
           <!--comment-->
    <br>
           <div class="container mt-14">
            <div class="row d-flex">
              <div class="col-md-12">
                
                {%if comments%}
                <div class="headings d-flex justify-content-between align-items-center mb-3">
                  <h5>Comments</h5>
                </div>
                {%endif%}
                
                  {% for comment in comments %}
                    {% if comment.material_id_id == files.id %}
                  
                <div class="card p-3">
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="user d-flex flex-row align-items-center">

                      <img src="{% static 'Assets/user.png' %}" width="30" class="user-img rounded-circle mr-2"> 
                      <span>
                        <small class="font-weight-bold text-success" >{{comment.username}}</small> 
                        
                      </span>
                    </div>
                    <small style="font-size: x-small;">{{comment.created_at}}</small>
                  </div>
                  <small class="font-weight" style="padding-left: 3.5%;">{{comment.text}}</small>
                </div>
                {% endif %}
                {% endfor %}

               
                
              </div>
            </div>
      </div>
       </div>
    </div>
  </div>
    {% endfor %}
    {% endif %}
  
</main>
  <!-- Pagination -->
   
    </div>

    <nav class="my-3 container">
      <ul class="pagination justify-content-center">
          {% if material.has_previous %}
        <li class="page-item"><a class="page-link" href="?page={{material.previous_page_number}}">Previous</a></li>
        {% endif %}
        {% for i in material.paginator.page_range %}
        {% if material.number == i %}
        <li class="page-item active"><a class="page-link" href="#">{{i}}</a></li>
        {% else %}
        <li class="page-item"><a class="page-link" href="?page={{i}}">{{i}}</a></li>
        {% endif %}
        {% endfor %}
        {% if material.has_next %}
        <li class="page-item"><a class="page-link" href="?page={{material.next_page_number}}">Next</a></li>
        {% endif %}
      </ul>
    </nav>
</body>
</html>

{% endblock %}